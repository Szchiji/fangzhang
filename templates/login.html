<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ç³»ç»ŸéªŒè¯</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>body{background:#f0f2f5;height:100vh;display:flex;align-items:center;justify-content:center}.card{width:90%;max-width:400px;text-align:center;padding:2rem;border-radius:15px;box-shadow:0 10px 25px rgba(0,0,0,0.1)}</style>
</head>
<body>
    <div class="card bg-white">
        <h4 class="mb-3">ğŸ” å®‰å…¨ç™»å½•</h4>
        <p class="text-muted small">è¯·åœ¨ Telegram å›å¤ä¸‹æ–¹æ•°å­—</p>
        <h1 class="display-4 fw-bold text-primary my-3">{{ code }}</h1>
        <div id="status" class="alert alert-light">æ­£åœ¨ç­‰å¾…éªŒè¯...</div>
        <a id="btn" href="/portal?sid={{ sid }}" class="btn btn-success w-100 mt-3 d-none">éªŒè¯æˆåŠŸï¼Œç‚¹å‡»è¿›å…¥</a>
    </div>
    <script>
        const sid = "{{ sid }}";
        setInterval(async () => {
            try {
                let res = await fetch(`/check_status/${sid}`);
                let data = await res.json();
                if (data.status === "verified") {
                    document.getElementById('status').className = "alert alert-success";
                    document.getElementById('status').innerText = "éªŒè¯é€šè¿‡ï¼è·³è½¬ä¸­...";
                    document.getElementById('btn').classList.remove('d-none');
                    window.location.href = `/portal?sid=${sid}`;
                }
            } catch(e){}
        }, 2000);
    </script>
</body>
</html>
