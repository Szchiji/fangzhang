{% extends "layout.html" %}
{% block content %}
<div class="card p-4">
    <h5 class="fw-bold mb-4">打卡系统配置</h5>
    <form id="checkinForm">
        <input type="hidden" name="sid" value="{{sid}}"><input type="hidden" name="gid" value="{{gid}}">
        <div class="row g-3 mb-4">
            <div class="col-md-6"><label class="small fw-bold text-muted">打卡指令</label><input type="text" name="cmd" class="form-control" value="{{g[3]}}"></div>
            <div class="col-md-3"><label class="small fw-bold text-muted">在线表情</label><input type="text" name="on_e" class="form-control" value="{{g[4]}}"></div>
            <div class="col-md-3"><label class="small fw-bold text-muted">离线表情</label><input type="text" name="off_e" class="form-control" value="{{g[5]}}"></div>
        </div>
        <div class="mb-4">
            <label class="small fw-bold text-muted mb-2">打卡成功消息 (支持富文本与链接)</label>
            <div id="editor" style="height: 200px; background: #fff;">{{g[7]|safe}}</div>
        </div>
        <button type="button" onclick="ajaxSubmit('checkinForm', '/api/save')" class="btn btn-primary px-5 rounded-pill">保存设置</button>
    </form>
</div>
<script>
    window.quill = new Quill('#editor', {
        theme: 'snow',
        modules: { toolbar: [['bold', 'italic', 'underline', 'link'], [{'color': []}]] }
    });
</script>
{% endblock %}
